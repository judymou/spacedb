{% extends 'layout.html' %}
{% load humanize %}
{% load static %}

{% block title%}Comprehensive Asteroid and Comet Database | Space Reference{% endblock %}

{% block scripts %}
<script src="{% static "js/lib/three.r98.min.js" %}"></script>
<script src="{% static "js/lib/TrackballControls.js" %}"></script>
<script src="{% static "js/lib/spacekit.js" %}"></script>
<!--
<script src="http://localhost:8001/src/lib/three.r98.min.js"></script>
<script src="http://localhost:8001/src/lib/TrackballControls.js"></script>
<script src="http://localhost:8001/build/spacekit.js"></script>
-->
<script>
window.OBJECT_DEFINITIONS= [
{% for object_set in object_sets %}
  {% for object in object_set.data %}
{
  name: "{{object.name}}",
  slug: "{{object.slug}}",
  ephem: {
    a: {{object.a}},
    e: {{object.e}},
    i: {{object.i}},
    om: {{object.om}},
    w: {{object.w}},
    ma: {{object.ma}},
    epoch: {{object.epoch}}
  }
},
  {% endfor %}
{% endfor %}
];

window.VIZ_SIMULATION_OPTS = {
  jdPerSecond: 2,
};
window.VIZ_OBJECT_OPTS = {};

function selectOrbit(domElement) {
  Object.keys(window.spaceobjects).forEach(function(key) {
    const ob = window.spaceobjects[key].getOrbit();
    if (key === domElement.dataset.slug) {
      ob.setVisibility(true);
      ob.setHexColor(0xff0000);
    } else {
      ob.setVisibility(false);
    }
  });
}
function deselectOrbit(domElement) {
  window.spaceobjects[domElement.dataset.slug].getOrbit().setHexColor(0xffffff);
}
</script>
<script src="{% static "js/main.js" %}"></script>
<script>
init3dVis();
</script>
{% endblock %}

{% block header %}
<header class="site-header">
  <h1 class="mainheading">Space Reference</h1>
  <h4 class="subheading">Compiled data &amp; simulations for {{object_count|intcomma}} celestial objects</h4>
</header>
{% endblock %}

{% block content %}
<div class="row">
  <div class="item-container col-sm-8">
    <div class="item-container__inner">
      <p>
        Welcome to SpaceReference.org. The purpose of this site is to catalog and showcase every known object in space.  We've started with asteroids and comets but this <a href="https://www.github.com/judymou/spacedb">open-source</a> project is being quickly expanded.
      </p>
      <p>
        SpaceDB compiles data from the NASA/JPL Small Body Database, the IAU Minor Planet Center, and the NASA/JPL Center for Near Earth Object Studies.
      </p>
      <p>
        If you'd like to create a customized solar system model, take a look at the full-screen interactive <a href="/solar-system">solar system</a> view.
      </p>
    </div>
  </div>
  <div class="item-container item-container__rightside col-sm-4">
    <div class="item-container__inner">
      <div class="react-search"></div>
      &nbsp;&nbsp; or view a <a rel="nofollow" href="/asteroid/random">random</a> object
    </div>
  </div>
</div>
<div class="row">
  <div class="item-container">
      <h2>Asteroids and Comets</h2>
      <p>
        We've organized hundreds of thousands celestial objects into these categories below for your perusal.
      </p>
      <div class="sticky vis-container vis-container__home"></div>
      {% for object_set in object_sets %}
        <div class="vis-selector" data-showvis="{{object_set.name}}">
          <h3>{{object_set.name}}</h3>
          <p>
            {{object_set.description}}
          </p>
          <div class="carousel-flex-container">
            <div class="carousel-flex-inner">
            {% for object in object_set.data %}
              <div class="tile carousel-item" data-slug="{{object.slug}}" onmouseover="if (typeof selectOrbit !== 'undefined') selectOrbit(this)"
                onmouseout="if (typeof deselectOrbit !== 'undefined') deselectOrbit(this)">
                <a href="/asteroid/{{object.slug}}">
                  <div>
                    <h5>{{object.name}}</h5>
                    <div class="tile-content">
                      <span class="label label-danger">{{object.get_size_adjective}}</span>
                      {% if object.is_pha %}
                        <span class="label label-warning">Potentially Hazardous</span>
                      {% else %}
                        <span class="label label-info">Not Hazardous</span>
                      {% endif %}
                      <br>
                      <div class="tile-desc">
                      {{object.get_shorthand}} was discovered in the year {{object.get_firstobs_date|date:"Y"}}.  It orbits the sun every {{object.sbdb_entry.per|floatformat:0|intcomma}} days, coming as close as {{object.get_perihelion|floatformat:2}} AU and reaching as far as {{object.get_aphelion|floatformat:2}} AU from the sun.
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            {% endfor %}
            </div>
          </div>
        </div>
      {% endfor %}
      <!--  
      <div class="vis-selector col-md-4" data-showvis="VISITED">
          <h3>Targets of Exploration</h3>
          <p>
            These objects have been visited by spacecraft.
          </p>
          <p>
            <ol>
              <li><a href="/asteroid/101955-bennu-1999-rq36">Bennu</a> - visited by OSIRIS-Rex</li>
              <li><a href="/asteroid/162173-ryugu-1999-ju3">Ryugu</a> - visited by Hayabusa 2</li>
              <li><a href="/asteroid/2867-steins-1969-vc">Steins</a> - visited by Rosetta</li>
              <li><a href="/asteroid/21-lutetia">Lutetia</a> - visited by Rosetta</li>
              <li><a href="/asteroid/486958-2014-mu69">Ultima Thule</a> - visited by New Horizons</li>
            </ol>
          </p>
        </div>
        <div class="vis-selector col-md-4" data-showvis="APPROACHES">
          <h3>Upcoming Approaches</h3>
          <p>
            These objects have upcoming fly-bys of Earth.
          </p>
          <p>
            <ol>
            {% for event in close_approaches %}
              <li><a href="/asteroid/{{event.space_object.slug}}">{{event.space_object.name}}</a> - {{event.date | date}}</li>
            {% endfor %}
            </ol>
          </p>
        </div>
        <div class="vis-selector col-md-4" data-showvis="POTENTIAL_EXPLORATION">
          <h3>Potential for Exploration</h3>
          <p>
            It is relatively inexpensive to send a spacecraft to these objects in terms of propulsive cost (listed by delta-v).
          </p>
          <p>
            <ol>
            {% for nhats in nhats_objects %}
              <li><a href="/asteroid/{{nhats.space_object.slug}}">{{nhats.space_object.name}}</a> - {{nhats.min_dv}} km/s</li>
            {% endfor %}
            </ol>
          </p>
        </div>
        <div class="vis-selector col-md-4" data-showvis="SENTRY">
          <h3>Potential Impactors</h3>
          <p>
            These objects have the potential to impact Earth (listed by probability of impact).
          </p>
          <p>
            <ol>
            {% for event in potential_impactors %}
              <li><a href="/asteroid/{{event.space_object.slug}}">{{event.space_object.name}}</a> - {{event.prob_percentage}}%, {{event.date | date}}</li>
            {% endfor %}
            </ol>
          </p>
        </div>
    -->
  </div> <!-- end item-container -->
</div> <!-- end row -->
<div class="row">
  <div class="item-container">
    <div class="item-container__inner">
      <h2>Object Classifications</h2>
      The two most noteworthy classifications for asteroids are "Near Earth Asteroid" (NEA) and "Potentially Hazardous Asteroid" (PHA).  Despite the names, neither classification indicates any direct danger to Earth.
      <ul>
        <li><a href="/category/near-earth-asteroids">Near Earth Asteroids</a> - asteroids whose orbit perihelion is less than 1.3 AU</li>
        <li><a href="/category/potentially-hazardous-asteroids">Potentially Hazardous Asteroids</a> - near-Earth asteroids whose orbits passes within 0.05 AU of Earth's and whose absolute magnitude H is 22.0 or brighter</li>
      </ul>
      Learn more about various <a href="https://cneos.jpl.nasa.gov/about/neo_groups.html">NEO groups</a> here.
    </div>
  </div>
</div>
<div class="row">
  <div class="item-container">
    <div class="item-container__inner">
      <h2>Orbit Types</h2>
      <ul>
      {% for orbit_class in orbit_classes %}
        <li><a href="/category/{{orbit_class.slug}}">{{orbit_class.name}}</a> - {{orbit_class.desc}}</li>
      {% endfor %}
      </ul>
    </div>
  </div>
</div>
{% endblock %}
